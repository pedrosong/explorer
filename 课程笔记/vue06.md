- 创建项目：看一下怎么创建的带store
- 删掉home组件和home/about组件
- 简写import
- 点击“登陆”的时候，需要吧“用户和密码”穿个后端，后端验证通过之后并返回前端token
  - login.vue存入username和password，使用v-bind绑定
  - api文件夹用来存放所有对于后端的请求
  - 使用axios使用创建后端请求（要安装， npm i axios -S）要安装在生产环境
- 跨域问题
- vue.config.js =>可以控制wepack（vuecli已经封装了webpack）
  - 解决跨域问题
  - 匹配/api并取消掉
    - 自己重新axios可以直接干掉api =》 html。js
    - 可以自己补上/api
  - 修改config之后要重启vuecli服务
  - 可以通过then（res）=》看到token等返回信息
- 存储token => vuex的sotre 并用vuex发起请求和接收数据
  - 所以需要用vuex重构，需要用到mutation和action
  - api/index.js需要返回一个http对象
  - data.data.token
- 登陆成功之后应该跳转页面 => router
  - 在router/index.js 里面要引入login和photo
  - sotre/index.js 里面发起getphoto请求
  - 要在渲染之前先拿到数据，需要要用created()
  - 处理鉴权问题：
    - 请求拦截器拿到token（=> vuex /shtoe/token），并存到“头部信息的鉴权信息”中
    - 要用异步处理登陆鉴权问题，登陆的时候要先等待带获取到token之后才会跳转界面和发起getPhoto请求 => 异步陷阱 => 使用打debugger断点来调试，确定逻辑出发顺序
    - 鉴权需要加上 bearer头
    - 通过localstorage存储token，state也是通过loaclstorage存储token
  - 前端存储图片数据：
    - 响应式数据最好都用计算属性处理



下半节课

- 处理上传弹窗 => 上传图片按钮的逻辑
  - 抽离出来组件，放在component/updataview里面，photo组件要对应的引入和注册
  - 通过data字段控制显示和隐藏，要在组件内部进行处理（关闭按钮在组件内）
  - sycn语法用来子组件向fu组件传参
- 处理上传图片界面显示 => 选择文件按钮的逻辑
  - 声明文件数据字段
  - 通过计算属性，来处理上传按钮和显示带上传图片的护持关系，基于wantphoto进行判断，0显示上传那就，nor
  - 图片此时还有没有上传到后端，如何正常显示数据呢？
    - 把前端显示图片的相关逻辑都抽离出来，放到uploadphotoitems的组件中
    - 通过转换成bace64的方式实现
    - 通过fileReader实现（异步的）
- 图片传给后端 => 开始上传按钮的逻辑
  - 实现api接口
    - 发起一个post请求 /upload，要瞅一眼后端逻辑的。
  - 处理上传图片
- 上传完成之后要复原上传窗口，并刷新暂时页面
  - 获取到图片千骨上传成功之后的动作，直接清空wantphoto即可，因为js是按顺序执行的
  - 增加一个dispatch
- 没有登陆时要跳转到登陆界面  
  - 路由鉴权！！！
  - axios响应拦截 => 后端返回401的时候 => 直接跳转到登陆界面
  - 跳转这个逻辑使用到了router.replace方法
  - 公共错误处理都可以放在拦截器里处理
  - 还有一种办法是，在router中进行鉴权处理：
    - 检测有没有token
    - 用beforeEach检测每一个需要跳转到路由中，检测目的界面是否需要token。通过在初始化的时候加上一个是否需要鉴权的配置
- 响应页
  - detail

